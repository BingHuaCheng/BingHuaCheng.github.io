<!DOCTYPE html>
<html lang="zh-ch">
<head>
    
        
<meta charset="utf-8">
<meta name="HandheldFriendly" content="True">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer-when-downgrade">

<title>Memory Modules and Namespaces  - To be a sailor</title>
<meta name="description" content="books review, life, messy thinking">

<link rel="icon" type="image/x-icon" href="https://binghuacheng.github.io/favicon.ico">
<link rel="apple-touch-icon-precomposed" href="https://binghuacheng.github.io/favicon.png">

<link rel="stylesheet" href="https://binghuacheng.github.io/css/style.css?rnd=1589639888" />



<meta property="og:title" content="Memory Modules and Namespaces" />
<meta property="og:description" content="Main Content  Separate compilation of programs Storage duration, scope, and linkage Placement new Namespaces  Separate Compilation In general, We divide the program into three parts:
 A header file that contains the structure declarations and prototypes for functions that use those structures A source code file that contains the code for the structure-related functions A source code file that contains the code that calls the structure-related functions  Here are some things commonly found in header files:" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://binghuacheng.github.io/posts/memory-modules-and-namespaces/" />
<meta property="article:published_time" content="2020-05-16T05:50:08+00:00" />
<meta property="article:modified_time" content="2020-05-16T05:50:08+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Memory Modules and Namespaces"/>
<meta name="twitter:description" content="Main Content  Separate compilation of programs Storage duration, scope, and linkage Placement new Namespaces  Separate Compilation In general, We divide the program into three parts:
 A header file that contains the structure declarations and prototypes for functions that use those structures A source code file that contains the code for the structure-related functions A source code file that contains the code that calls the structure-related functions  Here are some things commonly found in header files:"/>






    
</head>
<body>
    <a class="skip-main" href="#main">Skip to main content</a>
    <div class="container">
        <header> 
            
                <h1 class="site-header">
    <a href="https://binghuacheng.github.io">To be a sailor</a>
</h1>
<nav>
    
    
    <a class="" href="/about/" title="">About</a>
    
    <a class="" href="/tags/" title="">Tags</a>
    
    <a class="" href="/posts/" title="">Archive</a>
    
</nav>

            
        </header>
        <main id="main" tabindex="-1"> 
            

    <article class="post">
        <header>
            <h1>Memory Modules and Namespaces</h1>
        </header>
        <div class="content">
            <h2 id="main-content">Main Content</h2>
<ul>
<li>Separate compilation of programs</li>
<li>Storage duration, scope, and linkage</li>
<li>Placement <code>new</code></li>
<li>Namespaces</li>
</ul>
<h2 id="separate-compilation">Separate Compilation</h2>
<p>In general, We divide the program into three parts:</p>
<ul>
<li>A header file that contains the structure declarations and prototypes for functions that use those structures</li>
<li>A source code file that contains the code for the structure-related functions</li>
<li>A source code file that contains the code that calls the structure-related functions</li>
</ul>
<p>Here are some things commonly found in header files:</p>
<ul>
<li>Function prototypes</li>
<li>Symbolic constants defined using <code>#define</code> or <code>const</code></li>
<li>Structure declarations</li>
<li>Class declarations</li>
<li>Template declarations</li>
<li>Inline function</li>
</ul>
<h2 id="storage-duration-scope-and-linkage">Storage Duration, Scope, and Linkage</h2>
<p>C++ uses four separate schemes for sorting data, and the scheme differ in how long they preserve data in memory:</p>
<ul>
<li>Automatic storage duration</li>
<li>Static storage duration</li>
<li>Thread storage duration(C++11)</li>
<li>Dynamic storage duration</li>
</ul>
<h3 id="specifiers-and-qualifiers">Specifiers and Qualifiers</h3>
<p>Certain C++ keywords, called <code>storage class specifier</code> and <code>cv-qualifiers</code>, provide@s additional information about storage.</p>
<h4 id="cv-qualifiers">Cv-Qualifiers</h4>
<p>Here are the cv-qualifiers:</p>
<ul>
<li>const</li>
<li>volatile</li>
</ul>
<p>The <code>volatile</code> keyword indicates that the value in a memory location can be altered even though nothing in the program code modifies the contents. The intent of this keyword is to improve the optimization abilities of compiler. For example, suppose the compiler notices that a program uses the value of a particular variable twice within a few statementss. Rather than have the program look up the value twice, the compiler might cache the value in a register. This optimization assumes that the value of the variable doesn&rsquo;t change between the two uses. If you don&rsquo;t define a variable as <code>volatile</code>, then the compiler can feel free to make this optimization. If you do declare a variable as <code>volatile</code>, you&rsquo;re telling the compiler not to make that sort of optimization.</p>
<h4 id="mutable">mutable</h4>
<p>You can use it to indicate that a particular member of a structure(or class) can be altered even if a particular structure(or class) variable is a <code>const</code>. For example,</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++"><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">data</span>
{
	<span style="color:#66d9ef">char</span> name[<span style="color:#ae81ff">30</span>];
	<span style="color:#66d9ef">mutable</span> <span style="color:#66d9ef">int</span> accesses;
	...
};
<span style="color:#66d9ef">const</span> data veep <span style="color:#f92672">=</span> {<span style="color:#e6db74">&#34;Claybourne Clodde&#34;</span>, <span style="color:#ae81ff">0</span>, ...};
strcpy(veep.name, <span style="color:#e6db74">&#34;Joye Joux&#34;</span>);
veep.accesses<span style="color:#f92672">++</span>;
</code></pre></div><h4 id="about-const">About <code>const</code></h4>
<p>In c++(but not C), the <code>const</code> modifier alters the default storage classes slightly. Whereas a global variable has external linkage by default, a <code>const</code> global variable has internal linkage by default.
If, for some reason, you want to make a constant have external linkage, you can use the <code>external</code> keyword to override the default internal linkage:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-c++" data-lang="c++">external <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> states<span style="color:#f92672">=</span><span style="color:#ae81ff">50</span>;	<span style="color:#75715e">// definition with external linkage
</span></code></pre></div><p>When you declare a <code>const</code> within a function or block, it has block scope, which means the constant is usable only when the program is executing code within the block. This means that you can create constant within a function or block and not have to worry about the names conflicting with constants defined elsewhere.</p>
<h3 id="function-and-linkageone-definition-rule">Function and Linkage(One definition rule)</h3>
<p>C++, like C, doesn&rsquo;t allow you to define one function inside another, so all function automatically have static storage duration, meaning they are all present as long as the program is running. By default, functions have external linkage, meaning they can be shared across files. You can, in fact, use the keyword <code>extern</code> in a function prototype to indicate that the function is defined in another file, but that&rsquo;s optional. You can also use the keyword <code>static</code> to give a function internal linkage, confining its use to a single file. You would apply this keyword to the <code>prototype</code> and the <code>function definition</code>.
<strong>Nite:</strong> where C++ find functions
Suppose you call a function in a particular program. Where does C++ look for the function definition? If the function prototype in that file indicates that the file is static, the compiler looks only in that file for the function definition. Otherwise, the compiler(and the linker, too) look in all the program files. If it finds two definition, the compiler sends you a error message because you can have only one definition for one external function. If it fails to find any definition in the files, the function then searches the libraries. This implies that if you define a function that has the same name as a library function, the compiler uses you version rather than the library version.(However, C++ reserves the names of the standard library functions, so you shound&rsquo;t reuse them.) Some compiler-linker need explicit instructions to identify which library to search.</p>

        </div>
        <div class="article-info">
    
        <div class="article-date">2020-05-16</div>
    
    <div class="article-taxonomies">
        
            
                <ul class="article-tags">
                    
                        <li><a href="https://binghuacheng.github.io/tags/c&#43;&#43;-primer-plus">#C&#43;&#43;-Primer-Plus</a></li>
                    
                        <li><a href="https://binghuacheng.github.io/tags/c&#43;&#43;">#C&#43;&#43;</a></li>
                    
                </ul>
        
    </div>
</div>

    </article>
    


        </main>
        <footer>
            
                <p>Â© binghuacheng, 2020<br>
Powered by <a target="_blank" href="https://gohugo.io/">Hugo</a>, theme <a target="_blank" href="https://github.com/mitrichius/hugo-theme-anubis">Anubis</a>.
</p>
            
        </footer>
    </div>
</body>
</html>
